<html> 
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300..700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href = "static/css/styles.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="javascript" href="static/js/functions.js">
    </head>

    <title>
        Car Info- Homepage
    </title>
    <body class = color-mode>
      <script type="text/javascript" src="static/js/functions.js"></script>

        <!--Some code sourced from w3 schools. https://www.w3schools.com/howto/howto_js_mobile_navbar.asp-->
        <div class="topnav">
            <a href="homepage.html" class="active"><h1 class = "HeadText">CAR
                INFO</h1></a>
            
            <!-- Navigation links (hidden by default) -->
            <div id="myLinks" style="display: none;">
              <a href="homepage.html">Home</a>
              <a href="brandpage.html">Brands</a>
              <a href="aboutpage.html">About</a>
            </div>
            
            <!-- "Hamburger menu" / "Bar icon" to toggle the navigation links -->
            <a class="icon" onclick="displayMenu()">
              <i class="fa fa-bars"></i>
            </a>
          
          </div>
      
      <!--Some code sourced from w3 schools. https://www.w3schools.com/howto/howto_js_slideshow.asp-->
      <!--Construction of slideshow of cars.-->
      <div id="Slideshow-Container">
        <!-- Full-width images with number and caption text -->
        <div class="mySlides">
          <!--Bug fixed with this line, allows the image to appear with onload.-->
          <img class="carslide" src="images/Porsche930TurboD.jpeg" onload="currentSlide(1)" >
        </div>

        <div class="mySlides">
          <img class="carslide" src="images/Ferari308GTBD.jpeg" >
        </div>

        <div class="mySlides">
          <img class="carslide" src="images/2016FordMustangGT.jpg">
        </div>

        <div class="mySlides">
          <img class="carslide" src="images/2024runner.jpg">
        </div>

        <!-- Next and previous buttons -->
        <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
        <a class="next" onclick="plusSlides(1)">&#10095;</a>
      </div>
</div>
<br>

<!-- The dots/circles -->
<div style="text-align:center">
  <span class="dot" onclick="currentSlide(1)"></span>
  <span class="dot" onclick="currentSlide(2)"></span>
  <span class="dot" onclick="currentSlide(3)"></span>
  <span class="dot" onclick="currentSlide(4)"></span>
</div>
<!--Maybe potentially have a feature that just has the images going by on their own, can you stil click to go to the next one.-->

      </div>
      <script>
        async function fetchImages() {
          const response = await fetch('carsImages.json'); // Adjust the path if necessary
          const data = await response.json();
          return data.images;
    
        }

    // Function to randomly shuffle array
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    // Function to dynamically populate slideshow with random images
    async function loadRandomImages() {
        const imageList = await fetchImages(); // Fetch images from JSON
        const randomImages = shuffleArray(imageList); // Shuffle images randomly
        const slides = document.querySelectorAll('.mySlides .carslide'); // Get all slide image elements

        // Assign random images to each slide
        slides.forEach((slide, index) => {
            if (randomImages[index]) {
                slide.src = randomImages[index];
            }
        });
    }

    // Load random images on page load
    window.onload = function() {
        loadRandomImages(); // Call the function to load images
    };

        // async function getSlideshowDark(){
        //   let images = await fetch("http://127.0.0.1:5000/slideshow/dark");
        //   let jsonImages = await images.json();
        //   //Once we get more images into JSON, add a randomizer and a way to select
        //   //just those images at random indexes
        // }

        // function formImages(images){
        //   //Create HTML lines with <img src="...">
        //   //Pass HTML line to addImgToHTML
        // }

        // function addImgToHTML(img){
        //   //Build HTML and add to img to HTML of file.
        // }

      </script>
    </body>
</html>